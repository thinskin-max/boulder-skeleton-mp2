<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Boulder Skeleton â€” MP2 Edition</title>

<link rel="stylesheet" href="./style.css" />
</head>

<body>
<header>
  <strong>Boulder Skeleton â€” MP2 Edition</strong>
  <span class="badge" id="diag">åˆå§‹åŒ–ä¸­â€¦</span>

  <div class="kpi">
    <span>FPS: <b id="fps">0</b></span>
    <span>Frames: <b id="frames">0</b></span>
    <span>é€²åº¦ï¼š
      <progress id="prog" max="1" value="0"></progress>
      <b id="tprog">0:00 / 0:00</b>
    </span>
  </div>
</header>

<div class="layout">

  <!-- LEFT PANEL -->
  <section>
    <div class="pane-head">
      <div>1) Upload â†’ 2) Overlay â†’ 3) START â†’ 4) STOP â†’ 5) ZIP</div>
    </div>

    <div class="pane-body">

      <div class="row" style="margin-bottom:12px">
        <label class="fileBtn">Upload
          <input id="file" type="file" accept="video/*" />
        </label>

        <select id="modelSel">
          <option value="lite" selected>liteï¼ˆæœ€å¿«ï¼‰</option>
          <option value="full">fullï¼ˆå‡è¡¡ï¼‰</option>
          <option value="heavy">heavyï¼ˆæœ€é«˜ç²¾åº¦ï¼‰</option>
        </select>
      </div>

      <div class="row" style="margin-bottom:10px">
        <label><input id="recToggle" type="checkbox" /> å•Ÿå‹• Overlay</label>

        <button id="startBtn">START</button>
        <button id="pauseBtn">STOP</button>

        <button id="colorBtn">ğŸ¨ Skeleton Color</button>
        <input type="color" id="colorPicker" value="#FFD72D" style="display:none" />

        <button id="fullscreenBtn">ğŸ“º å…¨è¢å¹•</button>
        <button id="fsExitBtn">âœ• é€€å‡º</button>
      </div>

      <div class="row" style="margin-bottom:8px">
        <input id="zipName" type="text" placeholder="è¼¸å…¥æª”åï¼ˆå¯ç•™ç©ºï¼‰" />
        <button id="saveZipBtn">Download ZIP</button>
      </div>

      <div class="row">
        <button id="cameraBtn">é–‹æ”åƒé ­ (for PC)</button>
        <button id="stopCameraBtn">é—œæ”åƒé ­</button>
      </div>

      <div class="media-grid" id="mediaGrid" style="margin-top:12px">
        <div class="origWrap">
          <video id="video" playsinline muted></video>
        </div>

        <div class="overlayWrap">
          <canvas id="canvas"></canvas>
        </div>
      </div>

    </div>
  </section>

  <!-- RIGHT PANEL -->
  <aside>
    <div class="pane-head">
      <div>ç‹€æ…‹ / æ—¥èªŒ</div>
      <button id="selftestBtn">è‡ªæª¢</button>
    </div>
    <div class="pane-body">
      <div class="log" id="log">ç­‰å¾…è¼¸å‡ºâ€¦</div>
    </div>
  </aside>
</div>

<!-- MAIN SCRIPT MODULE -->
<script type="module">

/* Import modules */
import { loadMP2 } from "./js/mp2-loader.js";
import { initMP2Detector, startDetect, stopDetect } from "./js/mp2-detector.js";
import { startRecording, stopRecording } from "./js/recorder.js";
import { exportZip } from "./js/exporter.js";
import { drawSkeleton, hookSkeletonColor, fitCanvasToVideo } from "./js/draw.js";
import { setupUI } from "./js/ui.js";

/* Run UI init */
setupUI({
  loadMP2,
  initMP2Detector,
  startDetect,
  stopDetect,
  startRecording,
  stopRecording,
  exportZip,
  drawSkeleton,
  hookSkeletonColor,
  fitCanvasToVideo
});

</script>

</body>
</html>
